<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<div class="container mt-4">
  <h2 class="text-center text-primary mb-4">History</h2>

  <!-- Tampilkan pesan error jika userId tidak ada -->
  <div *ngIf="hasUserIdError" class="alert alert-danger mt-4" role="alert">
    Anda perlu login terlebih dahulu untuk melihat history. <a routerLink="/auth" class="alert-link">Login di sini</a>.
  </div>

  <!-- Section Orders -->
  <h3>Orders</h3>
  <div class="mt-3" *ngIf="orders.length && !hasUserIdError">
    <div class="card shadow-sm">
      <div class="card-body">
        <p class="card-text">
          <strong>Nama:</strong> {{ orders[0].nama }}<br />
          <strong>Produk:</strong> {{ orders[0]. products_id[0].nama }}<br />
          <strong>Total Harga:</strong> Rp{{ orders[0].total | number : "1.0-0" }}<br />
          <strong>Tanggal:</strong> {{ orders[0].createdAt | date : "mediumDate" }}
        </p>
      </div>
    </div>
  </div>
  <div *ngIf="orders.length === 0 && !hasUserIdError" class="alert alert-info mt-4" role="alert">
    Belum ada data order.
  </div>

  <!-- Section Payments -->
  <h3 class="mt-4">Payments</h3>
  <div class="mt-3" *ngIf="payments.length && !hasUserIdError">
    <div class="card shadow-sm">
      <div class="card-body">
        <p class="card-text">
          <strong>Address:</strong> {{ payments[0].address }}<br />
          <strong>Amount:</strong> Rp{{ payments[0].amount | number : "1.0-0" }}<br />
          <strong>Status:</strong> {{ payments[0].status | titlecase }}<br />
          <strong>Tanggal:</strong> {{ payments[0].paymentDate | date : "mediumDate" }}
        </p>
      </div>
    </div>
  </div>
  <div *ngIf="payments.length === 0 && !hasUserIdError" class="alert alert-info mt-4" role="alert">
    Belum ada data pembayaran.
  </div>
  <h3 class="mt-4">Shipping</h3>
  <div class="mt-3" *ngIf="shipping.length && !hasUserIdError">
    <div class="card shadow-sm">
      <div class="card-body">
        <p class="card-text">
          <strong>Nomor Resi:</strong> {{ shipping[0].waybill || 'Belum tersedia' }}<br />
          <strong>Courier:</strong> {{ shipping[0].courier }}<br />
          <strong>Tanggal:</strong> {{ shipping[0].shippingDate | date : "mediumDate" }}
          <strong>Status:</strong> {{ shipping[0].status }}<br />
        </p>
      </div>
    </div>
  </div>
  <div *ngIf="shipping.length === 0 && !hasUserIdError" class="alert alert-info mt-4" role="alert">
    Belum ada data pengiriman.
  </div>
</div>